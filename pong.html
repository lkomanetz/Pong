<!DOCTYPE html>
<html>
<head>
    <script src="gameObjects.js" type="text/javascript"></script>
    <script src="input.js" type="text/javascript"></script>
    <script src="game.js" type="text/javascript"></script>
    <script type="text/javascript">
        var game = null;
        
        window.onload = function() {
            var canvas = document.getElementById("canvas");
            canvas.addEventListener("mousemove", onMouseMove, false);
            document.addEventListener("keydown", onKeyDown, false);
            var gameSettings = new GameSettings();
            gameSettings.maxGoals = 10;
            gameSettings.difficultySetting = "medium";
            game = new Game(canvas, gameSettings);
            game.initializeObjects();
            
            setInterval(function() {
                game.update();
                if (game.isBallInGoal) {
                    game.reset();
                }
                game.drawObjects();
            }, 1000 / game.framesPerSecond);
        };
        
        function onKeyDown(evt) {
            game.onKeyPressed(evt.keyCode);
        }
        
        function onMouseMove(evt) {
            var canvas = document.getElementById("canvas");
            var mousePosition = getMousePosition(canvas, evt);
            game.onMouseMoved(mousePosition.y);
        }
        
        function getMousePosition(canvas, evt) {
            var root = document.documentElement;
            var boundingRect = canvas.getBoundingClientRect();
            return {
                x: evt.clientX - boundingRect.left - root.scrollLeft,
                y: evt.clientY - boundingRect.top - root.scrollTop
            };
        }
    </script>
    <style>
        canvas {
            margin: auto;
            display: block;
            cursor: none;
        }
    </style>
</head>
<body>
    <canvas id="canvas" width="800" height="600"></canvas>
</body>
</html>