<!DOCTYPE html>
<html>
<head>
    <script src="gameObjects.js" type="text/javascript"></script>
    <script src="game.js" type="text/javascript"></script>
    <script type="text/javascript">
        var game = null;
        var canvas = null;
        
        window.onload = function() {
            canvas = document.getElementById("canvas");
            canvas.addEventListener("mousemove", onMouseMove, false);
            game = new Game(canvas);
            game.initializeObjects();
            
            setInterval(function() {
                game.update();
                if (game.isBallInGoal) {
                    game.reset();
                }
                game.drawObjects();
                updateScoreLabels(game.score);
            }, 1000 / game.framesPerSecond);
        };
        
        
        function onMouseMove(evt) {
            var mousePosition = getMousePosition(canvas, evt);
            game.onMouseMoved(mousePosition.y);
        }
        
        function getMousePosition(canvas, evt) {
            var root = document.documentElement;
            var boundingRect = canvas.getBoundingClientRect();
            return {
                x: evt.clientX - boundingRect.left - root.scrollLeft,
                y: evt.clientY - boundingRect.top - root.scrollTop
            };
        }
        
        function updateScoreLabels(score) {
            document.getElementById("playerOneScore").innerText = score[1];
            document.getElementById("playerTwoScore").innerText = score[2];
        }
    </script>
</head>
<body>
    <label>Player One: <label id="playerOneScore"></label></label>
    <label>Player Two: <label id="playerTwoScore"></label></label>
    <canvas id="canvas" width="800" height="600" style="cursor: none"></canvas>
</body>
</html>